[{"/Users/apple/Projects/chat-module-react/client/src/index.js":"1","/Users/apple/Projects/chat-module-react/client/src/App.js":"2","/Users/apple/Projects/chat-module-react/client/src/components/Login/Login.jsx":"3","/Users/apple/Projects/chat-module-react/client/src/components/Chat/Chat.jsx":"4","/Users/apple/Projects/chat-module-react/client/src/components/Input/Input.jsx":"5","/Users/apple/Projects/chat-module-react/client/src/components/Message/Message.jsx":"6","/Users/apple/Projects/chat-module-react/client/src/hooks/http.hook.js":"7","/Users/apple/Projects/chat-module-react/client/src/components/User/User.jsx":"8"},{"size":150,"mtime":1610635704738,"results":"9","hashOfConfig":"10"},{"size":393,"mtime":1611066871257,"results":"11","hashOfConfig":"10"},{"size":1289,"mtime":1611571089340,"results":"12","hashOfConfig":"10"},{"size":3226,"mtime":1611757132478,"results":"13","hashOfConfig":"10"},{"size":1257,"mtime":1611225031577,"results":"14","hashOfConfig":"10"},{"size":540,"mtime":1611744176196,"results":"15","hashOfConfig":"10"},{"size":887,"mtime":1611563821973,"results":"16","hashOfConfig":"10"},{"size":178,"mtime":1611592487683,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"c85x81",{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"20"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"/Users/apple/Projects/chat-module-react/client/src/index.js",[],["37","38"],"/Users/apple/Projects/chat-module-react/client/src/App.js",[],"/Users/apple/Projects/chat-module-react/client/src/components/Login/Login.jsx",[],"/Users/apple/Projects/chat-module-react/client/src/components/Chat/Chat.jsx",["39","40","41"],"import React, { useState, useEffect } from 'react';\nimport queryString from 'query-string';\nimport io from 'socket.io-client';\nimport SocketIOFileUpload from 'socketio-file-upload';\n\nimport './Chat.css';\nimport Input from '../Input/Input';\nimport Message from '../Message/Message';\nimport { User } from '../User/User';\n\nlet socket;\n\nconst Chat = ({ location }) => {\n\n  const [name, setName] = useState('');\n  const [room, setRoom] = useState('');\n  const [message, setMessage] = useState('');\n  const [messageList, setMessageList] = useState([]);\n  const [usersInRoom, setUsersInRoom] = useState([]);\n\n  const ENDPOINT = 'localhost:5000';\n\n  useEffect(() => {\n\n    const { name, room } = queryString.parse(location.search);\n\n    socket = io(ENDPOINT);\n\n    setName(name);\n    setRoom(room);\n\n    const loginHandler = async () => {\n      try {\n        console.log('room name', room, name)\n        //const data = await request('/chat', 'POST', { name, room });\n        const response = await fetch('/chat', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json;charset=utf-8'\n          },\n          body: JSON.stringify({ room, name })\n        });\n        const data = await response.json();\n        // const historyMessages = data.forEach(elem => {\n        //   elem.\n        // });\n        console.log('data from server', data)\n      } catch (e) {\n        console.log(e);\n      }\n    }\n    //loginHandler();\n\n\n    socket.emit('join', { name, room }, (error) => {\n      if (error) alert(error);\n    });\n\n    socket.on('roomData', dataRoom => {\n      let users = [];\n      const allUsers = dataRoom.users.forEach(item => {\n        users = [...users, item]\n      });\n      setUsersInRoom(users);\n    })\n\n    return () => {\n      socket.disconnect();\n    }\n  }, [ENDPOINT, location.search]);\n\n  useEffect(() => {\n    \n    socket.on('messageHistory', messagesHistory => {\n      const messagesFormatted = messagesHistory.map(({ name, message }) => {\n      return { text: message, user: name }\n    });\n    setMessageList([...messageList, ...messagesFormatted]);\n    });\n\n    socket.on('message', (message) => {\n      setMessageList([...messageList, message])\n    });\n\n    socket.on('private', (message) => {\n      setMessageList([...messageList, message])\n    });\n\n  }, [messageList]);\n\n  const sendMessage = async (e) => {\n\n    e.preventDefault();\n\n    socket.emit('sendMessage', message, () => {\n      setMessage('');\n    });\n  }\n\n  const sendPrivateMsg = (user) => {\n    socket.emit('private', { message: message, socketId: user.id });\n    setMessage('');\n  };\n\n  return (\n\n    <div className='chatWrapper'>\n      <h1 className='chatHeading'>{room}</h1>\n      <div className='chatContainer'>\n        <ul className='chatMembers'>members:\n          {usersInRoom.map((item, i) =>\n          <User\n            onClick={() => sendPrivateMsg(item)}\n            name={item.name}\n            key={i}\n          />\n        )}\n        </ul>\n        <div className='chatInnerContainer'>\n          <Message messageList={messageList} />\n          <Input message={message} setMessage={setMessage} sendMessage={sendMessage} name={name} />\n        </div>\n      </div>\n    </div>\n  )\n};\n\nexport default Chat;","/Users/apple/Projects/chat-module-react/client/src/components/Input/Input.jsx",[],["42","43"],"/Users/apple/Projects/chat-module-react/client/src/components/Message/Message.jsx",[],"/Users/apple/Projects/chat-module-react/client/src/hooks/http.hook.js",["44"],"/Users/apple/Projects/chat-module-react/client/src/components/User/User.jsx",[],{"ruleId":"45","replacedBy":"46"},{"ruleId":"47","replacedBy":"48"},{"ruleId":"49","severity":1,"message":"50","line":4,"column":8,"nodeType":"51","messageId":"52","endLine":4,"endColumn":26},{"ruleId":"49","severity":1,"message":"53","line":32,"column":11,"nodeType":"51","messageId":"52","endLine":32,"endColumn":23},{"ruleId":"49","severity":1,"message":"54","line":61,"column":13,"nodeType":"51","messageId":"52","endLine":61,"endColumn":21},{"ruleId":"45","replacedBy":"55"},{"ruleId":"47","replacedBy":"56"},{"ruleId":"49","severity":1,"message":"57","line":6,"column":10,"nodeType":"51","messageId":"52","endLine":6,"endColumn":15},"no-native-reassign",["58"],"no-negated-in-lhs",["59"],"no-unused-vars","'SocketIOFileUpload' is defined but never used.","Identifier","unusedVar","'loginHandler' is assigned a value but never used.","'allUsers' is assigned a value but never used.",["58"],["59"],"'error' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]